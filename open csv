import pygame, random, os, sys, csv, time
from pygame.locals import *
from pygame import mixer
from gtts import gTTS

class Read_loud:
    # PART 1
    def say(text, filename="temp.mp3", delete_audio_file=True, language="en", slow=False):
        # PART 2
        audio = gTTS(text, lang=language, slow=slow)
        audio.save(filename)

        if os.name == "posix":
            sound = AudioSegment.from_mp3(filename)
            old_filename = filename
            filename = filename.split(".")[0] + ".ogg"
            sound.export(filename, format="ogg")
            if delete_audio_file:
                os.remove(old_filename)

        # PART 3
        mixer.init()
        mixer.music.load(filename)
        mixer.music.play()

        # PART 4
        seconds = 0
        while mixer.music.get_busy() == 1:
            time.sleep(0.25)
            seconds += 0.25

        # PART 5
        mixer.quit()
        if delete_audio_file:
            os.remove(filename)
        print(f"audio file played for {seconds} seconds")


with open ('learn_forest_data/input_data.csv', encoding="utf-8") as file:
    reader = csv.reader(file, delimiter=',')
    line_count = 0
    for row in reader:
        if line_count == 0:
            print(f'Column names are {", ".join(row)}')
            Read_loud.say(f'Column names are {", ".join(row)}')
            line_count += 1
        else:
            Read_loud.say(f'\t{row[0]} works in the {row[1]} department, and was born in {row[2]}.')
            # print(f'\t{row[0]} works in the {row[1]} department, and was born in {row[2]}.')
            # image = pygame.image.load(f'meza_dzivnieki/{row[1]}')
            # image = pygame.transform.scale(image, (50, 50))
            # show_image = True
            line_count += 1
    print(f'Processed {line_count} lines.')
    
#text = f'\t{row[0]} works in the {row[1]} department, and was born in {row[2]}.'



        
